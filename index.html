<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fid√∫cia Academy - Sistema de Treinamento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .admin-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #fbbf24;
            color: #000;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .content {
            padding: 30px;
        }

        /* PAINEL ADMIN */
        .admin-panel {
            display: none;
            background: #f0fdf4;
            border: 2px solid #059669;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .admin-panel h2 {
            color: #059669;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .admin-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .admin-section h3 {
            color: #047857;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #059669;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f9fafb;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-item:hover {
            background: #d1fae5;
        }

        .checkbox-item input {
            margin-right: 8px;
            cursor: pointer;
            width: auto;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
        }

        .template-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .template-btn {
            padding: 12px;
            background: white;
            border: 2px solid #059669;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
            color: #059669;
        }

        .template-btn:hover {
            background: #059669;
            color: white;
        }

        .generated-link-box {
            display: none;
            background: #dbeafe;
            border: 2px solid #3b82f6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .generated-link-box h4 {
            color: #1e40af;
            margin-bottom: 10px;
        }

        .link-display {
            background: white;
            padding: 15px;
            border-radius: 6px;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin-bottom: 15px;
            border: 1px solid #93c5fd;
        }

        /* Dashboard Normal */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .module-card {
            background: linear-gradient(to bottom right, #f0fdf4, #dcfce7);
            border: 2px solid #bbf7d0;
            border-radius: 12px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(5, 150, 105, 0.3);
            border-color: #059669;
        }

        .module-card h3 {
            color: #059669;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .module-card p {
            color: #047857;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .module-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending {
            background: #fbbf24;
            color: #000;
        }

        .status-completed {
            background: #10b981;
            color: white;
        }

        .status-failed {
            background: #ef4444;
            color: white;
        }

        .welcome-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 2px solid #059669;
            border-radius: 12px;
            padding: 18px 25px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(5, 150, 105, 0.1);
        }

        .welcome-box h2 {
            color: #059669;
            margin-bottom: 8px;
            font-size: 22px;
            font-weight: 600;
        }

        .welcome-box p {
            color: #047857;
            margin: 0;
            font-size: 15px;
            line-height: 1.5;
        }

        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #059669 0%, #047857 100%);
            height: 100%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            color: #047857;
            font-size: 14px;
            margin-top: 5px;
            font-weight: bold;
        }

        .btn {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            margin: 5px;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(5, 150, 105, 0.4);
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-copy {
            background: #3b82f6;
        }

        .btn-copy:hover {
            background: #2563eb;
        }

        /* Se√ß√µes ocultas */
        .training-section,
        .quiz-section,
        .result-section {
            display: none;
        }

        .lesson {
            background: #f0fdf4;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #059669;
        }

        .lesson h2 {
            color: #059669;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .lesson p {
            line-height: 1.8;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .question {
            background: #f0fdf4;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #059669;
        }

        .question h3 {
            color: #1f2937;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 20px;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #059669;
            background: #d1fae5;
        }

        .option input {
            margin-right: 10px;
        }

        .btn-back {
            background: #6b7280;
            margin-bottom: 20px;
        }

        .score {
            font-size: 48px;
            font-weight: bold;
            color: #059669;
            margin: 20px 0;
        }

        .certificate {
            border: 3px solid #059669;
            padding: 40px;
            margin: 30px 0;
            background: linear-gradient(to bottom, #ffffff 0%, #f0fdf4 100%);
            position: relative;
        }

        .certificate::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px solid #047857;
            pointer-events: none;
        }

        .certificate h2 {
            color: #059669;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .certificate p {
            font-size: 18px;
            margin: 10px 0;
        }

        .certificate .company {
            font-size: 24px;
            font-weight: bold;
            color: #047857;
            margin: 20px 0;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .btn, .score, .btn-back, .admin-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="admin-badge" id="adminBadge" style="display: none;">üîß MODO ADMIN</div>
            <h1>üéì Fid√∫cia Academy</h1>
            <p>Bem-vindo a plataforma de treinamento dos produtos Fid√∫cia, complete ele todo e obtenha seu certificado</p>
        </div>

        <div class="content">
            <!-- PAINEL ADMIN -->
            <div id="admin-panel" class="admin-panel">
                <h2>üîß Painel Administrativo - Gerador de Links</h2>
                
                <div class="admin-section">
                    <h3>1Ô∏è‚É£ Templates R√°pidos</h3>
                    <div class="template-buttons">
                        <button class="template-btn" onclick="applyTemplate('completo')">
                            üéØ Completo (Todos)
                        </button>
                        <button class="template-btn" onclick="applyTemplate('atendimento')">
                            üë• Atendimento
                        </button>
                        <button class="template-btn" onclick="applyTemplate('credito')">
                            üí∞ Cr√©dito
                        </button>
                        <button class="template-btn" onclick="applyTemplate('backoffice')">
                            üìä Back Office
                        </button>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>2Ô∏è‚É£ Selecione os M√≥dulos</h3>
                    <div class="checkbox-grid" id="adminModulesCheckbox"></div>
                </div>

                <div class="admin-section">
                    <h3>3Ô∏è‚É£ Nome da Empresa (Opcional)</h3>
                    <div class="form-group">
                        <input type="text" id="adminCompanyName" placeholder="Ex: Banco ABC Ltda">
                        <small style="color: #6b7280; display: block; margin-top: 5px;">
                            Este nome aparecer√° no certificado. Se deixar vazio, aparece "a empresa".
                        </small>
                    </div>
                </div>

                <button class="btn" onclick="generateAdminLink()">üöÄ Gerar Link do Treinamento</button>
                <button class="btn btn-secondary" onclick="toggleAdmin()">‚ùå Fechar Painel Admin</button>

                <div id="generatedLinkBox" class="generated-link-box">
                    <h4>‚úÖ Link Gerado com Sucesso!</h4>
                    <div class="link-display" id="generatedLinkDisplay"></div>
                    <button class="btn btn-copy" onclick="copyGeneratedLink()">üìã Copiar Link</button>
                    <button class="btn btn-secondary" onclick="testGeneratedLink()">üîç Testar Link</button>
                </div>
            </div>

            <!-- Dashboard Normal -->
            <div id="dashboard">
                <div class="welcome-box">
                    <h2>Bem-vindo!</h2>
                    <p>Complete todos os treinamentos dispon√≠veis abaixo para obter seus certificados.</p>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText"></div>
                
                <div class="modules-grid" id="modulesGrid"></div>
            </div>

            <!-- Training Content -->
            <div id="training-section" class="training-section">
                <button class="btn btn-back" onclick="backToDashboard()">‚Üê Voltar aos M√≥dulos</button>
                <div id="trainingContent"></div>
                <button class="btn" onclick="startQuiz()">Iniciar Avalia√ß√£o (10 quest√µes)</button>
            </div>

            <!-- Quiz Section -->
            <div id="quiz-section" class="quiz-section">
                <button class="btn btn-back" onclick="backToTraining()">‚Üê Voltar ao Conte√∫do</button>
                <h2 style="color: #059669; margin-bottom: 20px;">Avalia√ß√£o</h2>
                <p style="margin-bottom: 20px; color: #6b7280;"><strong>Responda as 10 quest√µes. Voc√™ precisa acertar no m√≠nimo 6 para ser aprovado.</strong></p>
                <div id="quizContent"></div>
                <button class="btn" onclick="submitQuiz()">Enviar Respostas</button>
            </div>

            <!-- Result Section -->
            <div id="result-section" class="result-section">
                <h2>Resultado da Avalia√ß√£o</h2>
                <div class="score" id="score"></div>
                <p id="feedback" style="font-size: 20px; margin: 20px 0;"></p>
                <div id="certificate-container"></div>
                <div>
                    <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir Certificado</button>
                    <button class="btn btn-secondary" onclick="backToDashboard()">‚Üê Voltar aos M√≥dulos</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o dos m√≥dulos (mesmo c√≥digo anterior, mantido igual)
        const trainingModules = {
            'abertura_contas': {
                title: 'Abertura de Contas',
                description: 'Processo completo de abertura de contas',
                content: [
                    { title: 'Documenta√ß√£o Necess√°ria', text: 'Para abrir uma conta, √© essencial verificar a documenta√ß√£o completa do cliente. Os documentos b√°sicos incluem RG, CPF, comprovante de resid√™ncia atualizado e comprovante de renda.' },
                    { title: 'Processo de Cadastro', text: 'O cadastro deve ser feito com aten√ß√£o aos detalhes. Verifique todos os dados pessoais, endere√ßo completo, telefones de contato e e-mail.' },
                    { title: 'Valida√ß√µes e Compliance', text: 'Realize todas as valida√ß√µes necess√°rias no sistema, incluindo consulta ao SERASA e verifica√ß√£o de PEP.' }
                ],
                questions: [
                    { question: 'Qual documento N√ÉO √© obrigat√≥rio para abertura de conta?', options: ['CPF', 'RG', 'T√≠tulo de Eleitor', 'Comprovante de Resid√™ncia'], correct: 2 },
                    { question: 'O que significa PEP?', options: ['Pessoa Exposta Politicamente', 'Protocolo de Endere√ßo Padr√£o', 'Processo Eletr√¥nico de Pagamento', 'Perfil Econ√¥mico do Pagador'], correct: 0 },
                    { question: 'Qual a import√¢ncia do comprovante de resid√™ncia?', options: ['N√£o √© importante', 'Validar endere√ßo do cliente', 'Apenas para arquivo', 'Exig√™ncia opcional'], correct: 1 },
                    { question: 'O que deve ser verificado no CPF?', options: ['Apenas se est√° correto', 'Regularidade e pend√™ncias', 'Data de emiss√£o', 'Local de emiss√£o'], correct: 1 },
                    { question: 'Quando fazer an√°lise de cr√©dito?', options: ['Depois de 30 dias', 'Nunca', 'Durante o processo de abertura', 'S√≥ se o cliente pedir'], correct: 2 },
                    { question: 'O que fazer se encontrar dados inconsistentes?', options: ['Ignorar', 'Solicitar corre√ß√£o ao cliente', 'Cadastrar assim mesmo', 'Cancelar o processo'], correct: 1 },
                    { question: 'Qual o prazo de validade do comprovante de resid√™ncia?', options: ['N√£o tem prazo', '90 dias', '180 dias', '1 ano'], correct: 1 },
                    { question: '√â obrigat√≥rio coletar telefone do cliente?', options: ['N√£o', 'Sim, pelo menos um contato', 'Apenas celular', 'Apenas fixo'], correct: 1 },
                    { question: 'O que √© compliance banc√°rio?', options: ['Sistema do banco', 'Conformidade com regras e leis', 'Tipo de conta', 'Setor do banco'], correct: 1 },
                    { question: 'Ap√≥s abrir a conta, o que deve ser entregue ao cliente?', options: ['Nada', 'Contrato e cart√£o', 'Apenas o n√∫mero da conta', 'Extrato'], correct: 1 }
                ]
            },
            'plataforma_credito': {
                title: 'Plataforma de Cr√©dito',
                description: 'An√°lise e concess√£o de cr√©dito',
                content: [
                    { title: 'Tipos de Cr√©dito', text: 'A plataforma oferece diversos produtos: cr√©dito pessoal, consignado, CDC, cheque especial e cart√£o de cr√©dito.' },
                    { title: 'An√°lise de Risco', text: 'A an√°lise considera score de cr√©dito, hist√≥rico de pagamentos, renda comprovada e comprometimento atual.' },
                    { title: 'Aprova√ß√£o e Limites', text: 'Os limites s√£o definidos automaticamente pelo sistema com base no perfil de risco.' }
                ],
                questions: [
                    { question: 'O que √© score de cr√©dito?', options: ['Saldo em conta', 'Pontua√ß√£o que indica risco de cr√©dito', 'Tipo de cr√©dito', 'Taxa de juros'], correct: 1 },
                    { question: 'Qual tipo de cr√©dito tem desconto em folha?', options: ['Pessoal', 'Consignado', 'CDC', 'Cheque especial'], correct: 1 },
                    { question: 'O que significa CDC?', options: ['Centro de Cr√©dito', 'Cr√©dito Direto ao Consumidor', 'Conta de Cr√©dito Digital', 'Controle de D√©bito'], correct: 1 },
                    { question: 'Comprometimento de renda acima de quanto √© preocupante?', options: ['10%', '30%', '50%', '70%'], correct: 2 },
                    { question: 'O que fazer se o sistema recusar automaticamente?', options: ['Liberar mesmo assim', 'Solicitar an√°lise manual', 'Ignorar', 'Aumentar o limite'], correct: 1 },
                    { question: 'Qual documento comprova renda de aut√¥nomo?', options: ['Holerite', 'Decore ou imposto de renda', 'Extrato banc√°rio', 'N√£o precisa comprovar'], correct: 1 },
                    { question: 'O que √© rating de risco?', options: ['Taxa de juros', 'Classifica√ß√£o do perfil do cliente', 'Tipo de conta', 'Limite de cr√©dito'], correct: 1 },
                    { question: 'Cr√©dito pr√©-aprovado pode ser recusado?', options: ['N√£o, √© garantido', 'Sim, se houver mudan√ßa no perfil', 'Apenas em casos criminais', 'Nunca'], correct: 1 },
                    { question: 'Qual a import√¢ncia do hist√≥rico de pagamento?', options: ['Nenhuma', 'Indica comportamento futuro do cliente', 'S√≥ para arquivo', 'Apenas estat√≠stica'], correct: 1 },
                    { question: 'O que fazer se cliente discordar da an√°lise?', options: ['Ignorar', 'Explicar os crit√©rios usados', 'Mudar a decis√£o', 'Encerrar atendimento'], correct: 1 }
                ]
            },
            'analise_contas': {
                title: 'An√°lise de Contas',
                description: 'Monitoramento e an√°lise de contas',
                content: [
                    { title: 'Movimenta√ß√£o Financeira', text: 'Analise o padr√£o de movimenta√ß√£o: entradas regulares, d√©bitos recorrentes e saldo m√©dio.' },
                    { title: 'Indicadores de Alerta', text: 'Fique atento a saques frequentes, transfer√™ncias suspeitas e movimenta√ß√£o incompat√≠vel.' },
                    { title: 'Relat√≥rios e Compliance', text: 'Documente todas as an√°lises realizadas e reporte casos suspeitos.' }
                ],
                questions: [
                    { question: 'O que √© movimenta√ß√£o at√≠pica?', options: ['Movimenta√ß√£o normal', 'Diferente do padr√£o habitual', 'Apenas d√©bitos', 'Apenas cr√©ditos'], correct: 1 },
                    { question: 'Saque acima de R$ 50.000 exige:', options: ['Nada especial', 'Comunica√ß√£o ao COAF', 'Autoriza√ß√£o do gerente', 'Apenas registro'], correct: 1 },
                    { question: 'O que √© saldo m√©dio?', options: ['Saldo atual', 'M√©dia dos saldos em per√≠odo', 'Maior saldo', 'Saldo m√≠nimo'], correct: 1 },
                    { question: 'D√©bitos recorrentes s√£o:', options: ['Aleat√≥rios', 'Pagamentos regulares', 'Saques', 'Transfer√™ncias'], correct: 1 },
                    { question: 'O que fazer ao identificar fraude?', options: ['Ignorar', 'Bloquear e reportar', 'Avisar cliente', 'Continuar normal'], correct: 1 },
                    { question: 'Uso excessivo de cheque especial indica:', options: ['Bom cliente', 'Dificuldade financeira', 'Nada relevante', 'Cliente VIP'], correct: 1 },
                    { question: 'O que √© COAF?', options: ['Banco', 'Conselho de Controle de Atividades Financeiras', 'Tipo de conta', 'Sistema'], correct: 1 },
                    { question: 'Transfer√™ncias suspeitas devem ser:', options: ['Ignoradas', 'Analisadas e reportadas', 'Canceladas', 'Autorizadas'], correct: 1 },
                    { question: 'Per√≠odo ideal para an√°lise:', options: ['1 dia', '1 semana', 'M√≠nimo 3 meses', '1 ano'], correct: 2 },
                    { question: 'Movimenta√ß√£o incompat√≠vel com renda:', options: ['√â normal', 'Requer investiga√ß√£o', 'Encerrar conta', 'Ignorar'], correct: 1 }
                ]
            },
            'emissao_ccb': {
                title: 'Emiss√£o de CCB',
                description: 'C√©dula de Cr√©dito Banc√°rio',
                content: [
                    { title: 'O que √© CCB', text: 'A C√©dula de Cr√©dito Banc√°rio √© um t√≠tulo que formaliza opera√ß√µes de empr√©stimo.' },
                    { title: 'Dados Obrigat√≥rios', text: 'A CCB deve conter valor, taxa de juros, prazo, forma de pagamento e dados do devedor.' },
                    { title: 'Assinatura e Valida√ß√£o', text: 'A CCB s√≥ tem validade com assinatura do cliente, f√≠sica ou digital.' }
                ],
                questions: [
                    { question: 'O que √© CCB?', options: ['Conta Corrente Banc√°ria', 'C√©dula de Cr√©dito Banc√°rio', 'Centro de Cr√©dito', 'Cart√£o de Cr√©dito'], correct: 1 },
                    { question: 'A CCB √© um:', options: ['Documento informal', 'T√≠tulo de cr√©dito', 'Tipo de conta', 'Cart√£o'], correct: 1 },
                    { question: 'Assinatura digital precisa de:', options: ['Nada especial', 'Certificado digital v√°lido', 'Testemunha', 'Cart√≥rio'], correct: 1 },
                    { question: 'Qual N√ÉO √© obrigat√≥rio na CCB:', options: ['Valor', 'Taxa de juros', 'Nome da m√£e', 'Prazo'], correct: 2 },
                    { question: 'CCB sem assinatura √©:', options: ['V√°lida', 'Inv√°lida', 'V√°lida por 30 dias', 'Depende do valor'], correct: 1 },
                    { question: 'Garantias na CCB s√£o:', options: ['Sempre obrigat√≥rias', 'Opcionais conforme caso', 'Proibidas', 'S√≥ valores altos'], correct: 1 },
                    { question: 'Onde armazenar CCB:', options: ['Apenas f√≠sico', 'Sistema digital', 'Com cliente', 'N√£o precisa'], correct: 1 },
                    { question: 'Cliente recusa assinar:', options: ['For√ßar', 'N√£o liberar cr√©dito', 'Assinar por ele', 'Liberar'], correct: 1 },
                    { question: 'CCB pode ser alterada:', options: ['Sim, sempre', 'N√£o, apenas com aditivo', 'Sim, gerente', 'Nunca'], correct: 1 },
                    { question: 'Fun√ß√£o da CCB:', options: ['Decorativa', 'Formalizar empr√©stimo', 'Controle interno', 'Marketing'], correct: 1 }
                ]
            },
            'emissao_cartoes': {
                title: 'Emiss√£o de Cart√µes',
                description: 'Gest√£o de cart√µes banc√°rios',
                content: [
                    { title: 'Tipos de Cart√µes', text: 'Cart√£o de d√©bito, cr√©dito, m√∫ltiplo e pr√©-pago. Cada tipo tem requisitos diferentes.' },
                    { title: 'Processo de Solicita√ß√£o', text: 'Verifique conta ativa, documenta√ß√£o e an√°lise de cr√©dito (para cart√£o de cr√©dito).' },
                    { title: 'Ativa√ß√£o e Senhas', text: 'Oriente sobre ativa√ß√£o via app, site ou telefone, e cadastro de senha segura.' }
                ],
                questions: [
                    { question: 'Cart√£o m√∫ltiplo combina:', options: ['Dois cr√©ditos', 'D√©bito e cr√©dito', 'Dois d√©bitos', 'Cr√©dito e pr√©-pago'], correct: 1 },
                    { question: 'Para cart√£o de cr√©dito √© obrigat√≥rio:', options: ['Apenas conta', 'An√°lise de cr√©dito aprovada', 'S√≥ CPF', 'Nada especial'], correct: 1 },
                    { question: 'Prazo de entrega:', options: ['24 horas', '10 dias √∫teis', '30 dias', '2 meses'], correct: 1 },
                    { question: 'Senha deve ter:', options: ['4 d√≠gitos', '6 d√≠gitos', '8 d√≠gitos', 'Livre'], correct: 0 },
                    { question: 'Cart√£o n√£o chega:', options: ['Aguardar', 'Solicitar 2¬™ via', 'Ir ao banco', 'Desistir'], correct: 1 },
                    { question: 'Cart√£o pr√©-pago precisa de:', options: ['An√°lise cr√©dito', 'Apenas carga', 'Comprovante renda', 'Garantias'], correct: 1 },
                    { question: 'Cliente pode ter:', options: ['Apenas 1', 'Conforme pol√≠tica', 'Ilimitado', 'M√°ximo 3'], correct: 1 },
                    { question: 'Ativa√ß√£o pode ser por:', options: ['Apenas ag√™ncia', 'App, site ou telefone', 'S√≥ telefone', 'Correio'], correct: 1 },
                    { question: 'Esqueceu senha:', options: ['Dar senha antiga', 'Recupera√ß√£o/redefini√ß√£o', 'Novo cart√£o', 'Nada'], correct: 1 },
                    { question: 'Cart√£o clonado:', options: ['Ignorar', 'Bloquear imediatamente', 'Usar normal', 'Trocar depois'], correct: 1 }
                ]
            },
            'med': {
                title: 'MED - M√°quina de Dep√≥sito',
                description: 'Opera√ß√£o de m√°quinas de dep√≥sito',
                content: [
                    { title: 'Funcionamento da MED', text: 'Permite dep√≥sitos em dinheiro e cheque sem envelope. Aceita at√© 50 notas por transa√ß√£o.' },
                    { title: 'Processo de Dep√≥sito', text: 'Cliente insere cart√£o, senha, escolhe dep√≥sito, insere notas. M√°quina conta automaticamente.' },
                    { title: 'Resolu√ß√£o de Problemas', text: 'Notas rasgadas podem ser rejeitadas. M√°quina travada: acionar suporte t√©cnico.' }
                ],
                questions: [
                    { question: 'MED aceita quantas notas:', options: ['10', '20', '50', '100'], correct: 2 },
                    { question: 'Precisa de envelope:', options: ['Sim', 'N√£o', '√Äs vezes', 'S√≥ cheque'], correct: 1 },
                    { question: 'Nota rasgada:', options: ['Sempre aceita', 'Geralmente n√£o', 'Depende valor', 'S√≥ grandes'], correct: 1 },
                    { question: 'Quem conta:', options: ['Cliente', 'Funcion√°rio', 'M√°quina', 'Gerente'], correct: 2 },
                    { question: 'Comprovante deve ser:', options: ['Descartado', 'Guardado', 'Na m√°quina', 'Enviado'], correct: 1 },
                    { question: 'Valor errado:', options: ['Confirmar', 'Cancelar e revisar', 'Chamar pol√≠cia', 'Ir embora'], correct: 1 },
                    { question: 'MED travou:', options: ['For√ßar', 'Acionar suporte', 'Ir embora', 'Esperar'], correct: 1 },
                    { question: 'Dep√≥sito cheque:', options: ['Imposs√≠vel', 'Poss√≠vel', 'S√≥ ag√™ncias', 'Proibido'], correct: 1 },
                    { question: 'Hor√°rio:', options: ['Comercial', '24h conforme local', 'S√≥ manh√£', 'S√≥ tarde'], correct: 1 },
                    { question: 'N√£o reconhece cart√£o:', options: ['For√ßar', 'Tentar novamente', 'Desistir', 'Ligar pol√≠cia'], correct: 1 }
                ]
            },
            'cabine': {
                title: 'Cabine de Autoatendimento',
                description: 'Suporte em cabines',
                content: [
                    { title: 'Servi√ßos Dispon√≠veis', text: 'Saques, dep√≥sitos, extratos, pagamentos, transfer√™ncias e segunda via de documentos.' },
                    { title: 'Atendimento ao Cliente', text: 'Auxilie sem fazer opera√ß√µes pelo cliente. Ensine passo a passo.' },
                    { title: 'Seguran√ßa', text: 'Fique atento a fraudes: pessoas tentando ver senhas ou oferecendo ajuda suspeita.' }
                ],
                questions: [
                    { question: 'Na cabine √© poss√≠vel:', options: ['Apenas saques', 'Diversos servi√ßos', 'S√≥ dep√≥sitos', 'Apenas consultas'], correct: 1 },
                    { question: 'Funcion√°rio pode digitar senha:', options: ['Sim', 'N√£o, nunca', '√Äs vezes', 'Com autoriza√ß√£o'], correct: 1 },
                    { question: 'Cliente com dificuldade:', options: ['Fazer por ele', 'Ensinar passo a passo', 'Ignorar', 'Mandar ao caixa'], correct: 1 },
                    { question: 'Pessoa oferecendo ajuda:', options: ['√â normal', 'Poss√≠vel fraude', 'Incentivar', 'Ignorar'], correct: 1 },
                    { question: 'Limite de saque:', options: ['Ilimitado', 'Conforme pol√≠tica', 'R$ 100', 'R$ 1.000'], correct: 1 },
                    { question: 'Cart√£o esquecido:', options: ['Deixar', 'Recolher e devolver', 'Ficar', 'Jogar fora'], correct: 1 },
                    { question: 'Extrato impresso:', options: ['Deixar', 'Entregar ao cliente', 'Descartar', 'Arquivar'], correct: 1 },
                    { question: 'M√°quina sem dinheiro:', options: ['For√ßar', 'Orientar outro caixa', 'Abrir', 'Ignorar'], correct: 1 },
                    { question: 'Hor√°rio das cabines:', options: ['24h ou conforme', 'S√≥ comercial', 'S√≥ manh√£', 'Meio-dia'], correct: 0 },
                    { question: 'Comportamento suspeito:', options: ['Ignorar', 'Reportar', 'Confrontar', 'Filmar'], correct: 1 }
                ]
            },
            'emissao_boleto': {
                title: 'Emiss√£o de Boleto',
                description: 'Gera√ß√£o de boletos banc√°rios',
                content: [
                    { title: 'Tipos de Boleto', text: 'Boleto registrado (rastre√°vel) √© obrigat√≥rio desde 2018. Cont√©m c√≥digo de barras e linha digit√°vel.' },
                    { title: 'Gera√ß√£o de Boleto', text: 'Informe valor, vencimento, dados do pagador e descri√ß√£o. Sistema gera c√≥digo √∫nico.' },
                    { title: 'Gest√£o e Baixa', text: 'Acompanhe status: pendente, pago, vencido, cancelado. Baixa √© autom√°tica ap√≥s pagamento.' }
                ],
                questions: [
                    { question: 'Boleto registrado desde:', options: ['2015', '2018', '2020', '2022'], correct: 1 },
                    { question: 'C√≥digo de barras serve para:', options: ['Decora√ß√£o', 'Leitura autom√°tica', 'Identificar banco', 'Nada'], correct: 1 },
                    { question: 'Boleto pode ser enviado por:', options: ['S√≥ correio', 'Email, app ou impresso', 'Apenas WhatsApp', 'S√≥ pessoalmente'], correct: 1 },
                    { question: 'Ap√≥s vencimento:', options: ['Boleto some', 'Pode ter multa e juros', 'Nada muda', 'N√£o pode pagar'], correct: 1 },
                    { question: 'Dados obrigat√≥rios N√ÉO incluem:', options: ['Valor', 'Vencimento', 'Cor favorita', 'Dados pagador'], correct: 2 },
                    { question: 'Baixa ap√≥s pagamento:', options: ['Manual', 'Autom√°tica', 'Opcional', 'Desnecess√°ria'], correct: 1 },
                    { question: 'Para cancelar:', options: ['Rasgar', 'Usar procedimento', 'Ligar cliente', 'Nada'], correct: 1 },
                    { question: 'Linha digit√°vel √©:', options: ['Decora√ß√£o', 'C√≥digo alternativo', 'Telefone banco', 'Nada'], correct: 1 },
                    { question: 'Boleto pago mas n√£o atualizou:', options: ['Pagar novamente', 'Verificar compensa√ß√£o', 'Ignorar', '√â fraude'], correct: 1 },
                    { question: 'Benefici√°rio √©:', options: ['Quem paga', 'Quem recebe', 'O banco', 'Ningu√©m'], correct: 1 }
                ]
            }
        };

        // Templates de perfis
        const profileTemplates = {
            completo: ['abertura_contas', 'plataforma_credito', 'analise_contas', 'emissao_ccb', 'emissao_cartoes', 'med', 'cabine', 'emissao_boleto'],
            atendimento: ['abertura_contas', 'emissao_cartoes', 'med', 'cabine', 'emissao_boleto'],
            credito: ['plataforma_credito', 'analise_contas', 'emissao_ccb'],
            backoffice: ['analise_contas', 'emissao_ccb', 'emissao_boleto']
        };

        // Estado da aplica√ß√£o
        let activeModules = [];
        let currentModule = null;
        let userProgress = {};
        let companyName = '';
        let isAdminMode = false;
        let generatedLink = '';

        // Inicializa√ß√£o
        function init() {
            const urlParams = new URLSearchParams(window.location.search);
            const modulesParam = urlParams.get('modulos');
            companyName = urlParams.get('empresa') || '';
            const adminParam = urlParams.get('admin');

            // Verificar modo admin
            if (adminParam === 'true') {
                isAdminMode = true;
                showAdminPanel();
            }

            if (modulesParam) {
                activeModules = modulesParam.split(',');
            } else if (!isAdminMode) {
                activeModules = Object.keys(trainingModules);
            }

            const storageKey = `training_progress_${modulesParam || 'default'}`;
            const savedProgress = localStorage.getItem(storageKey);
            if (savedProgress) {
                userProgress = JSON.parse(savedProgress);
            }

            if (!isAdminMode) {
                loadDashboard();
            }
        }

        // Mostrar painel admin
        function showAdminPanel() {
            document.getElementById('admin-panel').style.display = 'block';
            document.getElementById('adminBadge').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';

            // Criar checkboxes dos m√≥dulos
            const container = document.getElementById('adminModulesCheckbox');
            container.innerHTML = '';
            
            Object.keys(trainingModules).forEach(moduleId => {
                const module = trainingModules[moduleId];
                const div = document.createElement('div');
                div.className = 'checkbox-item';
                div.innerHTML = `
                    <input type="checkbox" id="admin_${moduleId}" value="${moduleId}">
                    <label for="admin_${moduleId}">${module.title}</label>
                `;
                container.appendChild(div);
            });
        }

        // Toggle admin panel
        function toggleAdmin() {
            const panel = document.getElementById('admin-panel');
            const dashboard = document.getElementById('dashboard');
            
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                dashboard.style.display = 'none';
            } else {
                panel.style.display = 'none';
                dashboard.style.display = 'block';
                loadDashboard();
            }
        }

        // Aplicar template
        function applyTemplate(type) {
            // Desmarcar todos
            document.querySelectorAll('#adminModulesCheckbox input').forEach(cb => cb.checked = false);
            
            // Marcar os do template
            profileTemplates[type].forEach(moduleId => {
                const checkbox = document.getElementById(`admin_${moduleId}`);
                if (checkbox) checkbox.checked = true;
            });
        }

        // Gerar link no painel admin
        function generateAdminLink() {
            const baseUrl = window.location.origin + window.location.pathname;
            const selectedModules = [];
            
            document.querySelectorAll('#adminModulesCheckbox input:checked').forEach(cb => {
                selectedModules.push(cb.value);
            });

            if (selectedModules.length === 0) {
                alert('‚ö†Ô∏è Selecione pelo menos um m√≥dulo!');
                return;
            }

            const company = document.getElementById('adminCompanyName').value.trim();
            
            generatedLink = baseUrl + '?modulos=' + selectedModules.join(',');
            if (company) {
                generatedLink += '&empresa=' + encodeURIComponent(company);
            } else {
                generatedLink += '&empresa=';
            }

            document.getElementById('generatedLinkDisplay').textContent = generatedLink;
            document.getElementById('generatedLinkBox').style.display = 'block';
            
            // Scroll para o resultado
            document.getElementById('generatedLinkBox').scrollIntoView({ behavior: 'smooth' });
        }

        // Copiar link gerado
        function copyGeneratedLink() {
            navigator.clipboard.writeText(generatedLink).then(() => {
                alert('‚úÖ Link copiado para a √°rea de transfer√™ncia!');
            });
        }

        // Testar link gerado
        function testGeneratedLink() {
            window.open(generatedLink, '_blank');
        }

        // Carregar Dashboard
        function loadDashboard() {
            const grid = document.getElementById('modulesGrid');
            grid.innerHTML = '';

            let completed = 0;
            const total = activeModules.length;

            activeModules.forEach(moduleId => {
                const module = trainingModules[moduleId];
                if (!module) return;

                const card = document.createElement('div');
                card.className = 'module-card';
                
                let statusClass = 'status-pending';
                let statusText = 'Pendente';
                
                if (userProgress[moduleId]) {
                    if (userProgress[moduleId].passed) {
                        statusClass = 'status-completed';
                        statusText = `Conclu√≠do - ${userProgress[moduleId].score}/10`;
                        completed++;
                    } else {
                        statusClass = 'status-failed';
                        statusText = `N√£o aprovado - ${userProgress[moduleId].score}/10`;
                    }
                }

                card.innerHTML = `
                    <h3>${module.title}</h3>
                    <p>${module.description}</p>
                    <span class="module-status ${statusClass}">${statusText}</span>
                `;
                
                card.onclick = () => loadTraining(moduleId);
                grid.appendChild(card);
            });

            const percentage = total > 0 ? (completed / total) * 100 : 0;
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${completed} de ${total} treinamentos conclu√≠dos (${Math.round(percentage)}%)`;
        }

        // Carregar Treinamento
        function loadTraining(moduleId) {
            currentModule = moduleId;
            const module = trainingModules[moduleId];
            
            const content = document.getElementById('trainingContent');
            content.innerHTML = `<h2 style="color: #059669; margin-bottom: 20px;">${module.title}</h2>`;
            
            module.content.forEach(lesson => {
                content.innerHTML += `
                    <div class="lesson">
                        <h2>${lesson.title}</h2>
                        <p>${lesson.text}</p>
                    </div>
                `;
            });

            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('training-section').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Iniciar Quiz
        function startQuiz() {
            const module = trainingModules[currentModule];
            const quizContent = document.getElementById('quizContent');
            quizContent.innerHTML = '';

            module.questions.forEach((q, index) => {
                quizContent.innerHTML += `
                    <div class="question">
                        <h3>${index + 1}. ${q.question}</h3>
                        <div class="options">
                            ${q.options.map((option, i) => `
                                <label class="option">
                                    <input type="radio" name="q${index}" value="${i}">
                                    ${option}
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            document.getElementById('training-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Enviar Quiz
        function submitQuiz() {
            const module = trainingModules[currentModule];
            let score = 0;

            module.questions.forEach((q, index) => {
                const answer = document.querySelector(`input[name="q${index}"]:checked`);
                if (answer && parseInt(answer.value) === q.correct) {
                    score++;
                }
            });

            const passed = score >= 6;

            userProgress[currentModule] = {
                score: score,
                passed: passed,
                date: new Date().toLocaleDateString('pt-BR')
            };

            const urlParams = new URLSearchParams(window.location.search);
            const modulesParam = urlParams.get('modulos');
            const storageKey = `training_progress_${modulesParam || 'default'}`;
            localStorage.setItem(storageKey, JSON.stringify(userProgress));

            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';
            document.getElementById('score').textContent = `${score}/10`;

            let feedback = '';
            let certificateHTML = '';

            if (passed) {
                feedback = 'üéâ Parab√©ns! Voc√™ foi aprovado neste m√≥dulo!';
                certificateHTML = generateCertificate(score);
            } else {
                feedback = 'üìö Voc√™ n√£o atingiu a nota m√≠nima (6 acertos). Revise o conte√∫do e tente novamente.';
            }

            document.getElementById('feedback').textContent = feedback;
            document.getElementById('certificate-container').innerHTML = certificateHTML;
            window.scrollTo(0, 0);
        }

        // Gerar Certificado
        function generateCertificate(score) {
            const date = new Date().toLocaleDateString('pt-BR');
            const module = trainingModules[currentModule];
            const displayName = companyName || 'a empresa';

            return `
                <div class="certificate">
                    <h2>CERTIFICADO DE CONCLUS√ÉO</h2>
                    <p>Certificamos que</p>
                    <p class="company">${displayName}</p>
                    <p>concluiu com √™xito o treinamento de</p>
                    <p><strong>${module.title}</strong></p>
                    <p>com aproveitamento de <strong>${score}/10 (${(score/10*100)}%)</strong></p>
                    <p style="margin-top: 30px;">Data: ${date}</p>
                    <p style="margin-top: 20px; font-size: 14px; color: #6b7280;">Fid√∫cia Academy</p>
                </div>
            `;
        }

        // Navega√ß√£o
        function backToDashboard() {
            document.getElementById('training-section').style.display = 'none';
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            loadDashboard();
            window.scrollTo(0, 0);
        }

        function backToTraining() {
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('training-section').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Iniciar
        window.onload = init;
    </script>
</body>
</html>
